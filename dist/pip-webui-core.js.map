{"version":3,"sources":["core.js","routing/state.js","debug/assert.js","debug/debug.js","timer/timer.js","transactions/errors.js","transactions/transactions.js","translate/translate.js","translate/translate_directive.js","translate/translate_filter.js","translate/translate_service.js","utilities/collections.js","utilities/general.js","utilities/strings.js","utilities/tags.js","utilities/utilities.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClLA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AClDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/JA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3QA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/cA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui-core.js","sourcesContent":["/**\r\n * @file Registration of all WebUI core services\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipCore', [\r\n        'pipUtils',\r\n        'pipErrors',\r\n\t    'pipTransactions',\r\n\t    'pipTranslate',\r\n        'pipState',\r\n        'pipTimer',\r\n        'pipAssert',\r\n        'pipDebug',\r\n        'pipTranslateFilters'\r\n    ]);\r\n    \r\n})();","/**\r\n * @file Application router extended from ui.router\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n \r\n(function () {\r\n    'use strict';\r\n    \r\n    var thisModule = angular.module('pipState', ['ui.router', 'pipTranslate', 'pipAssert']);\r\n\r\n    thisModule.config(\r\n        ['$locationProvider', '$httpProvider', 'pipTranslateProvider', function($locationProvider, $httpProvider, pipTranslateProvider) {\r\n            // Switch to HTML5 routing mode\r\n            //$locationProvider.html5Mode(true);\r\n            pipTranslateProvider.translations('en', {\r\n                'ERROR_SWITCHING': 'Error while switching route. Try again.'\r\n            });\r\n\r\n            pipTranslateProvider.translations('ru', {\r\n                'ERROR_SWITCHING': 'Ошибка при переходе. Попробуйте ещё раз.'\r\n            });\r\n        }]\r\n    );\r\n\r\n    thisModule.run(\r\n        ['$rootScope', 'pipTranslate', '$state', function($rootScope, pipTranslate, $state) {\r\n            $rootScope.$on('$stateChangeSuccess',\r\n                function(event, toState, toParams, fromState, fromParams) {\r\n                    // Unset routing variable to disable page transition\r\n                    $rootScope.$routing = false;\r\n                    // Record current and previous state\r\n                    $rootScope.$state = {name: toState.name, url: toState.url, params: toParams};\r\n                    $rootScope.$prevState = {name: fromState.name, url: fromState.url, params: fromParams};\r\n                }\r\n            );\r\n\r\n            // Intercept route error\r\n            $rootScope.$on('$stateChangeError',\r\n                function(event, toState, toParams, fromState, fromParams, error) {\r\n                    // Unset routing variable to disable page transition\r\n                    $rootScope.$routing = false;\r\n\r\n                    console.error('Error while switching route to ' + toState.name);\r\n                    console.error(error);\r\n                }\r\n            );\r\n\r\n\r\n            // Intercept route error\r\n            $rootScope.$on('$stateNotFound',\r\n                function(event, unfoundState, fromState, fromParams) {\r\n                    event.preventDefault();\r\n\r\n                    // todo make configured error state name\r\n                    $state.go('errors_missing_route',  {\r\n                            unfoundState: unfoundState,\r\n                            fromState : {\r\n                                to: fromState ? fromState.name : '',\r\n                                fromParams: fromParams\r\n                            }\r\n                        }\r\n                    );\r\n                    $rootScope.$routing = false;\r\n                }\r\n            );\r\n\r\n        }]\r\n    );\r\n\r\n    thisModule.provider('pipState', ['$stateProvider', 'pipAssertProvider', function($stateProvider, pipAssertProvider) {\r\n        // Configuration of redirected states\r\n        var redirectedStates = {};\r\n\r\n        this.redirect = setRedirect;\r\n        this.state = $stateProvider.state;\r\n\r\n        this.$get = ['$state', '$timeout', 'pipAssert', function ($state, $timeout, pipAssert) {\r\n            $state.redirect = redirect;\r\n            \r\n            return $state;\r\n            \r\n\t\t\t//------------------------\r\n            function redirect(event, state, params, $rootScope) {\r\n                pipAssert.contains(state, 'name', \"$state.redirect: state should contains name prop\");\r\n                pipAssert.isObject(params, \"$state.redirect: params should be an object\");\r\n\r\n                var toState;\r\n\r\n                $rootScope.$routing = true;\r\n                toState = redirectedStates[state.name];\r\n                if (_.isFunction(toState)) {\r\n                    toState = toState(state.name, params, $rootScope);\r\n\r\n                    if (_.isNull(toState)) {\r\n                        $rootScope.$routing = false;\r\n                        throw new Error('Redirected toState cannot be null');\r\n                    }\r\n                }\r\n\r\n                if (!!toState) {\r\n                    $timeout(function() {\r\n                        event.preventDefault();\r\n                        $state.transitionTo(toState, params, {location: 'replace'});\r\n                    });\r\n\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n            }\r\n        }];\r\n\r\n        return;        \r\n        //------------------\r\n\r\n        // Specify automatic redirect from one state to another\r\n        function setRedirect(fromState, toState) {\r\n            pipAssertProvider.isNotNull(fromState, \"pipState.redirect: fromState cannot be null\");\r\n            pipAssertProvider.isNotNull(toState, \"pipState.redirect: toState cannot be null\");\r\n            \r\n            redirectedStates[fromState] = toState;  \r\n\r\n            return this;\r\n        };\r\n\r\n    }]);\r\n\r\n})();","/**\r\n * @file Assertion utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipAssert', ['pipDebug']);\r\n\r\n    thisModule.provider('pipAssert', ['pipDebugProvider', function (pipDebugProvider) {\r\n\r\n        return {\r\n            isEmpty: pipDebugProvider.enabled() ? isEmpty : noop,\r\n            isObjectId: pipDebugProvider.enabled() ? isObjectId : noop,\r\n            isDefined: pipDebugProvider.enabled() ? isDefined : noop,\r\n            isDef: pipDebugProvider.enabled() ? isDefined : noop,\r\n            contains: pipDebugProvider.enabled() ? contains : noop,\r\n            equal: pipDebugProvider.enabled() ? equal : noop,\r\n            notEqual: pipDebugProvider.enabled() ? notEqual : noop,\r\n            strictEqual: pipDebugProvider.enabled() ? strictEqual : noop,\r\n            notStrictEqual: pipDebugProvider.enabled() ? notStrictEqual : noop,\r\n            isArray: pipDebugProvider.enabled() ? isArray : noop,\r\n            isBoolean: pipDebugProvider.enabled() ? isBoolean : noop,\r\n            isNumber: pipDebugProvider.enabled() ? isNumber : noop,\r\n            isString: pipDebugProvider.enabled() ? isString : noop,\r\n            isObject: pipDebugProvider.enabled() ? isObject : noop,\r\n            isDate: pipDebugProvider.enabled() ? isDate : noop,\r\n            isError: pipDebugProvider.enabled() ? isError : noop,\r\n            isFunction: pipDebugProvider.enabled() ? isFunction : noop,\r\n            isNotNull: pipDebugProvider.enabled() ? isNotNull : noop,\r\n            \r\n            $get: ['pipDebug', function(pipDebug) {\r\n                return {\r\n                    isEmpty: pipDebug.enabled() ? isEmpty : noop,\r\n                    isObjectId: pipDebug.enabled() ? isObjectId : noop,\r\n                    isDefined: pipDebug.enabled() ? isDefined : noop,\r\n                    isDef: pipDebug.enabled() ? isDefined : noop,\r\n                    contains: pipDebug.enabled() ? contains : noop,\r\n                    equal: pipDebug.enabled() ? equal :  noop,\r\n                    notEqual: pipDebug.enabled() ? notEqual : noop,\r\n                    strictEqual: pipDebug.enabled() ? strictEqual : noop,\r\n                    notStrictEqual: pipDebug.enabled() ? notStrictEqual :  noop,\r\n                    isArray: pipDebug.enabled() ? isArray : noop,\r\n                    isBoolean: pipDebug.enabled() ? isBoolean : noop,\r\n                    isNumber: pipDebug.enabled() ? isNumber : noop,\r\n                    isString: pipDebug.enabled() ? isString : noop,\r\n                    isObject: pipDebug.enabled() ? isObject : noop,\r\n                    isDate: pipDebug.enabled() ? isDate : noop,\r\n                    isError: pipDebug.enabled() ? isError : noop,\r\n                    isFunction: pipDebug.enabled() ? isFunction : noop,\r\n                    isNotNull: pipDebug.enabled() ? isNotNull : noop\r\n                }\r\n            }]\r\n        };\r\n\r\n        function noop() {}\r\n\r\n        function objectToString(o) {\r\n            return Object.prototype.toString.call(o);\r\n        }\r\n\r\n        function isArray(arg, message) {\r\n            if (!Array.isArray(arg)) {\r\n                throw new Error(message || arg + ' should be array');\r\n            }\r\n        }\r\n\r\n        function isBoolean(arg, message) {\r\n            if (typeof arg !== 'boolean') {\r\n                throw new Error(message || arg + ' should be boolean');\r\n            }\r\n        }\r\n\r\n        function isNotNull(arg, message) {\r\n            if (arg === null) {\r\n                throw new Error(message || arg + ' should be not null');\r\n            }\r\n        }\r\n\r\n        function isNumber(arg, message) {\r\n            if (typeof arg !== 'number') {\r\n                throw new Error(message || arg + ' should be number');\r\n            }\r\n        }\r\n\r\n        function isString(arg, message) {\r\n            if (typeof arg !== 'string') {\r\n                throw new Error(message || arg + ' should be string');\r\n            }\r\n        }\r\n\r\n        function isObject(arg, message) {\r\n            if (typeof arg !== 'object') {\r\n                throw new Error(message || arg + ' should be an object');\r\n            }\r\n        }\r\n\r\n        function isDate(d, message) {\r\n            if (typeof d === 'object' && objectToString(d) !== '[object Date]') {\r\n                throw new Error(message || d + ' should be a date');\r\n            }\r\n        }\r\n\r\n        function isError(e, message) {\r\n            if (typeof e === 'object' && (objectToString(e) !== '[object Error]' || e instanceof Error)) {\r\n                throw new Error(message || e + ' should be an error');\r\n            }\r\n        }\r\n\r\n        function isFunction(arg, message) {\r\n            if (typeof arg !== 'function') {\r\n                throw new Error(message || arg + ' should be a function');\r\n            }\r\n        }\r\n\r\n        function isDefined(arg, message) {\r\n           if (typeof arg === \"undefined\") {\r\n               throw new Error(message || arg + ' should be defined');\r\n           }\r\n        }\r\n\r\n        function isEmpty(arg, message) {\r\n            if (arg === null || arg === undefined || arg === false) {\r\n                throw new Error(message || arg + ' should be not null or undefined or false');\r\n            }\r\n        }\r\n\r\n        function contains(obj, prop, message) {\r\n            if (typeof obj !== 'object') {\r\n                throw new Error(obj + ' should be an object');\r\n            }\r\n            if (obj[prop] === null || obj[prop] === undefined) {\r\n                throw new Error(message || prop + ' should be in object ' + obj);\r\n            }\r\n        }\r\n\r\n        // Compares args with ==\r\n        function equal(actual, expected, message) {\r\n            if (actual != expected) {\r\n                throw new Error(message || actual + ' should be not equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with !=\r\n        function notEqual(actual, expected, message) {\r\n            if (actual == expected) {\r\n                throw new Error(message || actual + ' should be equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with ===\r\n        function strictEqual(actual, expected, message) {\r\n            if (actual !== expected) {\r\n                throw new Error(message || actual + ' should not be strict equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Compares args with !==\r\n        function notStrictEqual(actual, expected, message) {\r\n            if (actual === expected) {\r\n                throw new Error(message || actual + ' should not strict equal ' + expected);\r\n            }\r\n        }\r\n\r\n        // Checks if value is a valid ObjectId\r\n        function isObjectId(value, message) {\r\n            var checkForHexRegExp = new RegExp(\"^[0-9a-fA-F]{24}$\");\r\n            if (!checkForHexRegExp.test(value)) {\r\n                throw new Error(message || value + ' should be an object id');\r\n            }\r\n        }\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Debugging service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipDebug', []);\r\n\r\n    thisModule.provider('pipDebug', ['$logProvider', function ($logProvider) {\r\n\r\n        this.enabled = true;\r\n\r\n        return {\r\n            enable: enable,\r\n            disable: disable,\r\n            enabled: enabled,\r\n            \r\n            $get: ['$log', function($log) {\r\n                return {\r\n                    enabled: enabled,\r\n                    log: $log.log,\r\n                    info: $log.info,\r\n                    warn: $log.warn,\r\n                    error: $log.error,\r\n                    debug: $log.debug\r\n                }\r\n            }]\r\n        };\r\n\r\n        function enabled() {\r\n            return this.enabled;\r\n        }\r\n\r\n        function enable() {\r\n            this.enabled = true;\r\n            $logProvider.debugEnabled(true);\r\n        }\r\n\r\n        function disable() {\r\n            this.enabled = false;\r\n            $logProvider.debugEnabled(false);\r\n        }\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Global application timer service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTimer', []);\r\n\r\n    thisModule.service('pipTimer', \r\n        ['$interval', '$rootScope', function ($interval, $rootScope) {\r\n            var \r\n                AUTO_PULL_CHANGES_TIMEOUT = 60000, // 1 min\r\n                AUTO_UPDATE_PAGE_TIMEOUT = 15000,  // 15 sec\r\n                AUTO_UPDATE_COLLECTION_TIMEOUT = 300000, // 5 min\r\n                started = false, \r\n                autoPullChangesInterval, \r\n                autoUpdatePageInterval,\r\n                autoUpdateCollectionInterval;\r\n\r\n            return {\r\n                isStarted: isStarted,\r\n                start: start,\r\n                stop: stop\r\n            };\r\n\r\n            //------------------------\r\n\r\n            function isStarted() {\r\n                return started;\r\n            };\r\n\r\n            function start() {\r\n                if (started) return;\r\n\r\n                autoPullChangesInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoPullChanges');\r\n                }, AUTO_PULL_CHANGES_TIMEOUT);\r\n\r\n                autoUpdatePageInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoUpdatePage');\r\n                }, AUTO_UPDATE_PAGE_TIMEOUT);\r\n\r\n                autoUpdateCollectionInterval = $interval(function () {\r\n                    $rootScope.$broadcast('pipAutoUpdateCollection');\r\n                }, AUTO_UPDATE_COLLECTION_TIMEOUT);\r\n\r\n                started = true;\r\n            };\r\n\r\n            function stop() {\r\n                if (autoPullChangesInterval)\r\n                    $interval.cancel(autoPullChangesInterval);\r\n\r\n                if (autoUpdatePageInterval)\r\n                    $interval.cancel(autoUpdatePageInterval);\r\n\r\n                if (autoUpdateCollectionInterval)\r\n                    $interval.cancel(autoUpdatePageInterval);\r\n\r\n                started = false;\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Error context\r\n * @description\r\n * Error context decouples business components that throw errors\r\n * and visualization components that show them to users\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n \r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipErrors', ['pipUtils', 'pipAssert']);\r\n\r\n    /*\r\n     * Error is designed to assist with error handling\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * */\r\n    thisModule.factory('pipError',\r\n        ['$rootScope', 'pipAssert', function ($rootScope, pipAssert) {\r\n\r\n            // Initialize error scope\r\n            $rootScope.errors = {};\r\n\r\n            return createError;\r\n\r\n            //----------------------------\r\n\r\n            function initError(scope) {\r\n                $rootScope.errors[scope] = {\r\n                    message: undefined,\r\n                    code: undefined,\r\n                    details: undefined\r\n                };\r\n            };\r\n\r\n            function errorMessage(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                // Process regular messages\r\n                if (error.message) {\r\n                    return error.message;\r\n                }\r\n\r\n                // Process server application errors\r\n                if (error.data) {\r\n                    if (error.data.code) {\r\n                        // process server error codes here\r\n                        return 'ERROR_' + error.data.code;\r\n                    }\r\n\r\n                    if (error.data.message) {\r\n                        return error.data.message;\r\n                    }\r\n                }\r\n\r\n                // Process standard HTTP errors\r\n                if (error.statusText) {\r\n                    return error.statusText;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return 'ERROR_' + error.status;\r\n                }\r\n                \r\n                return error.data ? error.data : error;\r\n            };\r\n\r\n            function errorCode(error) {\r\n                if (_.isNull(error)) {\r\n                    return null;\r\n                }\r\n\r\n                if (error.data && error.data.code) {\r\n                    return error.data.code;\r\n                }\r\n\r\n                if (error.status) {\r\n                    return error.status;\r\n                }\r\n                \r\n                return null;\r\n            };\r\n\r\n            function errorDetails(error) {\r\n                return error && error.data ? error.data : error;\r\n            };\r\n\r\n            function createError(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = {\r\n                    reset: function () {\r\n                        initError(scope);\r\n                    },\r\n\r\n                    empty: function() {\r\n                        var error = $rootScope.errors[scope];\r\n                        return _.isNull(error) || (_.isNull(error.message) && _.isNull(error.code));\r\n                    },\r\n\r\n                    get: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope];\r\n                        }\r\n                        return '';\r\n                    },\r\n\r\n                    message: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].message;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    code: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].code;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    details: function () {\r\n                        if ($rootScope.errors[scope]) {\r\n                            return $rootScope.errors[scope].details;\r\n                        }\r\n                        return null;\r\n                    },\r\n\r\n                    set: function (error) {\r\n                        if (error) {\r\n                            pipAssert.isObject(error, \"Setting error: error should be an object\");\r\n\r\n                            $rootScope.errors[scope] = {\r\n                                message: errorMessage(error),\r\n                                code: errorCode(error),\r\n                                details: errorDetails(error)\r\n                            };\r\n                            console.error($rootScope.errors[scope]);\r\n                        } else {\r\n                            initError(scope);\r\n                        }\r\n                    }\r\n                };\r\n\r\n                // Assign error into scope\r\n                if (_.isObject(scopeObject)) scopeObject.error = error;\r\n\r\n                return error;\r\n            };\r\n        }]\r\n    );\r\n    \r\n})();","/**\r\n * @file Transaction context\r\n * @description\r\n * Transaction context helps to wrap multiple server requests\r\n * into one logical transaction. It decouples transaction\r\n * management and progress visualization to the user\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTransactions', ['pipTranslate', 'pipErrors']);\r\n\r\n\tthisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n        \r\n        pipTranslateProvider.translations('en', {\r\n            'ENTERING': 'Entering...',\r\n            'PROCESSING': 'Processing...',\r\n            'LOADING': 'Loading...',\r\n            'SAVING': 'Saving...'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'ENTERING': 'Вход в систему...',\r\n            'PROCESSING': 'Обрабатывается...',\r\n            'LOADING': 'Загружается...',\r\n            'SAVING': 'Сохраняется...'\r\n        });\r\n\t\t\r\n\t}]);\r\n\r\n    /*\r\n     * Transaction is designed to assist with transaction processing\r\n     * within different application scopes & controllers without overlap.\r\n     *\r\n     * A unique identification of the scope/controller is passed to the service\r\n     * when it is initialized to identify the error for that scope.\r\n     * \r\n     * Transaction is also integrated with Error service. So you don't need to double it\r\n     * */\r\n    thisModule.factory('pipTransaction',\r\n        ['$rootScope', 'pipError', function ($rootScope, pipError) {\r\n\r\n            // Initialize transaction scope\r\n            $rootScope.transactions = {};\r\n\r\n            return createTransaction;\r\n\r\n            //---------------------------------\r\n\r\n            function initTransaction(scope) {\r\n                $rootScope.transactions[scope] = {\r\n                    id: undefined,\r\n                    operation: undefined\r\n                };\r\n            }\r\n            \r\n            function createTransaction(scope, scopeObject) {\r\n                scope = scope || 'global';\r\n\r\n                var error = pipError(scope);\r\n                var transaction = {\r\n                    error: error,\r\n\r\n                    reset: function () {\r\n                        initTransaction();\r\n                        error.reset();\r\n                    },\r\n\r\n                    busy: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction != null && transaction.id;\r\n                    },\r\n\r\n                    failed: function() {\r\n                        return !error.empty();\r\n                    },\r\n\r\n                    aborted: function(id) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return _.isNull(transaction) || transaction.id != id;\r\n                    },\r\n\r\n                    get: function () {\r\n                        if (_.isNull($rootScope.transactions[scope])) {\r\n                            initTransaction(scope);\r\n                        }\r\n                        return $rootScope.transactions[scope];\r\n                    },\r\n\r\n                    id: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.id : null;\r\n                    },\r\n\r\n                    operation: function () {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        return transaction ? transaction.operation : null;\r\n                    },\r\n\r\n                    errorMessage: function () {\r\n                        return error.message();\r\n                    },\r\n\r\n                    begin: function (operation) {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        // Transaction already in progress\r\n                        if (transaction != null && transaction.id) {\r\n                            return null;\r\n                        }                      \r\n\r\n                        transaction = $rootScope.transactions[scope] = {\r\n                            id: new Date().getTime(),\r\n                            operation: operation || 'PROCESSING'\r\n                        };\r\n                        error.reset();\r\n\r\n                        return transaction.id;\r\n                    },\r\n\r\n                    abort: function() {\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction) {\r\n                            transaction.id = null;\r\n                        }\r\n                        error.reset();\r\n                    },\r\n\r\n                    end: function (err) {\r\n                        if (err) error.set(err);\r\n                        else error.reset();\r\n\r\n                        var transaction = $rootScope.transactions[scope];\r\n                        if (transaction != null) {\r\n                            transaction.id = null;\r\n                        }                      \r\n                    }\r\n                };\r\n\r\n                if (_.isObject(scopeObject)) {\r\n                    scopeObject.error = error;\r\n                    scopeObject.transaction = transaction;\r\n                }\r\n\r\n                return transaction;\r\n            }\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Translatation service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslate', ['pipTranslate.Service', 'pipTranslate.Directive', 'pipTranslate.Filter']);\r\n\r\n})();","/**\r\n * @file Translatation directives\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslate.Directive', ['pipTranslate.Service']);\r\n\r\n    thisModule.directive('pipTranslate', ['pipTranslate', function(pipTranslate) {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslate',\r\n                key2: '@key'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                var key = scope.key1 || scope.key2;\r\n                var value = pipTranslate.translate(key);\r\n                element.text(value);\r\n            }\r\n\r\n        };\r\n    }]);\r\n\r\n    thisModule.directive('pipTranslateHtml', ['pipTranslate', function(pipTranslate) {\r\n        return {\r\n            restrict: 'EA',\r\n            scope: {\r\n                key1: '@pipTranslateHtml',\r\n                key2: '@key'\r\n            },\r\n            link: function (scope, element, attrs) {\r\n                var key = scope.key1 || scope.key2;\r\n                var value = pipTranslate.translate(key);\r\n                element.html(value);\r\n            }\r\n\r\n        };\r\n    }]);\r\n\r\n})();","/**\r\n * @file Filter to translate string resources\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslate.Filter', ['pipTranslate.Service']);\r\n\r\n    thisModule.filter('translate', ['pipTranslate', function (pipTranslate) {\r\n        return function (key) {\r\n            return pipTranslate.translate(key) || key;\r\n        }\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file Translatation service\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n \r\n /* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipTranslate.Service', ['LocalStorageModule', 'pipAssert']);\r\n\r\n    thisModule.provider('pipTranslate', ['pipAssertProvider', function(pipAssertProvider) {\r\n        var \r\n            language = 'en',\r\n            persist = true,\r\n            setRoot = true,\r\n            translationMap = {\r\n                en: {\r\n                    'en': 'English',\r\n                    'ru': 'Russian',\r\n                    'es': 'Spanish',\r\n                    'pt': 'Portuguese',\r\n                    'de': 'German',\r\n                    'fr': 'French'\r\n                },\r\n                ru: {\r\n                    'en': 'Английский',\r\n                    'ru': 'Русский',\r\n                    'es': 'Испанский',\r\n                    'pt': 'Португальский',\r\n                    'de': 'Немецкий',\r\n                    'fr': 'Французский'\r\n                }\r\n            };\r\n\r\n        this.translations = setTranslations;\r\n        this.language = initLanguage;\r\n        this.use = initLanguage;\r\n        this.persist = initPersist;\r\n        this.setRoot = initSetRoot;\r\n\r\n        this.$get = ['$rootScope', '$timeout', 'localStorageService', 'pipAssert', function ($rootScope, $timeout, localStorageService, pipAssert) {\r\n            // Read language from persistent storage\r\n            if (persist)\r\n                language = localStorageService.get('language') || language;\r\n\r\n            // Set root variable\r\n            if (setRoot) \r\n                $rootScope.$language = language;\r\n            \r\n            // Resetting root scope to force update language on the screen\r\n            function reset(fullReset, partialReset) {\r\n                fullReset = fullReset !== undefined ? !!fullReset : true;\r\n                partialReset = partialReset !== undefined ? !!partialReset : true;\r\n\r\n                $rootScope.$reset = fullReset;\r\n                $rootScope.$partialReset = partialReset;\r\n                $timeout(function() {\r\n                    $rootScope.$reset = false;\r\n                    $rootScope.$partialReset = false;\r\n                }, 0);\r\n            }\r\n\r\n            return {\r\n                use: function (newLanguage, fullReset, partialReset) {\r\n                    pipAssert.isString(newLanguage || '', \"pipTranslate.use: argument should be a string\");\r\n                    if (newLanguage != null && newLanguage != language) {\r\n                        language = newLanguage;\r\n                        if (persist)\r\n                            localStorageService.set('language', language);\r\n                        if (setRoot)\r\n                            $rootScope.$language = language;\r\n                        reset(fullReset, partialReset);\r\n                    }\r\n                    return language;\r\n                },\r\n\r\n                translations: setTranslations,\r\n                translate: translate,\r\n                translateArray: translateArray,\r\n                translateSet: translateSet,\r\n                translateObjects: translateObjects,\r\n                translateById: translateById,\r\n                translateSetById: translateSetById,\r\n                translateStringsSet: translateStringsSet\r\n            }\r\n        }];\r\n\r\n        // Initialize language selection\r\n        function initLanguage(newLanguage) {\r\n            pipAssertProvider.isString(newLanguage || '', \"pipTranslateProvider.use or pipTranslateProvider.language: argument should be a string\");\r\n\r\n            if (newLanguage != null) {\r\n                language = newLanguage;\r\n            }\r\n            return language;\r\n        }\r\n\r\n        // Initialize persistence flag\r\n        function initPersist(newPersist) {\r\n            if (newPersist != null) {\r\n                pipAssertProvider.isBoolean(newPersist || '', \"pipTranslateProvider.persist: argument should be a boolean\");\r\n                persist = newPersist;\r\n            }\r\n            return persist;\r\n        }\r\n\r\n        // Initialize set root flag\r\n        function initSetRoot(newSetRoot) {\r\n            if (newSetRoot != null) {\r\n                pipAssertProvider.isBoolean(newSetRoot || '', \"pipTranslateProvider.setRoot: argument should be a boolean\");\r\n                setRoot = newSetRoot;\r\n            }\r\n            return setRoot;  \r\n        }\r\n\r\n        // Set translation strings for specific language\r\n        function setTranslations(language, languageMap) {\r\n            pipAssertProvider.isString(language, \"pipTranslate.setTranslations or pipTranslateProvider.translations: first argument should be a string\");\r\n            pipAssertProvider.isObject(languageMap, \"pipTranslate.setTranslations or pipTranslateProvider.translations: second argument should be an object\");\r\n\r\n            var map = translationMap[language] || {};\r\n            translationMap[language] = _.extend(map, languageMap);\r\n        }\r\n\r\n        // Translate a string by key using set language\r\n        function translate(key) {\r\n            if (_.isNull(key) || _.isUndefined(key)) return '';\r\n\r\n            var map = translationMap[language] || {};\r\n            return map[key] || key;\r\n        }\r\n\r\n        // Translate an array of strings\r\n        function translateArray(keys) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateArray: argument should be an array\");\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var key = k || '';\r\n                values.push(map[key] || key);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings into array of objects (set)\r\n        function translateSet(keys, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateSet: first argument should be an array\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateSet: second argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateSet: third argument should be a string\");\r\n\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n\r\n                obj[key] = mapKey;\r\n                obj[value] = map[mapKey] || mapKey;\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate a collection of objects\r\n        function translateObjects(items, key, value) {\r\n            if (_.isNull(items) || items.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(items, \"pipTranslate.translateObjects: first argument should be an array\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateObjects: second argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateObjects: third argument should be a string\");\r\n\r\n            key = key || 'name';\r\n            value = value || 'nameLocal';\r\n\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(items, function (i) {\r\n                var item = i, mapKey = item[key] || '';\r\n\r\n                item[value] = map[mapKey] || mapKey;\r\n            });\r\n\r\n            return items;\r\n        }\r\n\r\n        // Translate a string by key  with prefix using set language todo\r\n        function translateById(prefix, key) {\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateById: second argument should be a string\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateById: first argument should be a string\");\r\n\r\n            prefix = prefix ? prefix + '_' : '';\r\n            key = (prefix + key).replace(/ /g, '_').toUpperCase();\r\n            if (key == null) return '';\r\n            var map = translationMap[language] || {};\r\n            return map[key] || key;\r\n        };\r\n\r\n        function translateSetById(keys, prefix, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateSetById: first argument should be an array\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateSetById: second argument should be a string\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateSetById: third argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateSetById: forth argument should be a string\");\r\n\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() : '';\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n\r\n                obj[key] = mapKey;\r\n                obj[value] = map[prefix + '_' + mapKey] || mapKey;\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n\r\n        // Translate an array of strings, apply uppercase and replace ' ' => '_'\r\n        function translateStringsSet(keys, prefix, key, value) {\r\n            if (_.isNull(keys) || keys.length == 0) return [];\r\n\r\n            pipAssertProvider.isArray(keys, \"pipTranslate.translateStringsSet: first argument should be an array\");\r\n            pipAssertProvider.isString(prefix || '', \"pipTranslate.translateStringsSet: second argument should be a string\");\r\n            pipAssertProvider.isString(key || '', \"pipTranslate.translateStringsSet: third argument should be a string\");\r\n            pipAssertProvider.isString(value || '', \"pipTranslate.translateStringsSet: forth argument should be a string\");\r\n\r\n            key = key || 'id';\r\n            value = value || 'name';\r\n            prefix = prefix ? prefix.replace(/ /g, '_').toUpperCase() + '_': '';\r\n\r\n            var values = [];\r\n            var map = translationMap[language] || {};\r\n\r\n            _.each(keys, function (k) {\r\n                var obj = {}, mapKey = k || '';\r\n                obj[key] = mapKey;\r\n                obj[value] = map[prefix + mapKey.replace(/ /g, '_').toUpperCase()]\r\n                    || (prefix + mapKey.replace(/ /g, '_').toUpperCase());\r\n\r\n                values.push(obj);\r\n            });\r\n\r\n            return values;\r\n        }\r\n    }]);\r\n\r\n})();","/**\r\n * @file Collection utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Collections', []);\r\n\r\n    thisModule.factory('pipCollections', function () {\r\n        var collections = {};\r\n\r\n        // Index of element in array by key\r\n        collections.indexBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    return i;\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n    \r\n        // Find element in array by key\r\n        collections.findBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    return items[i];\r\n                }\r\n            }\r\n            return null;\r\n        };\r\n    \r\n        // Remove element from array by value\r\n        collections.remove = function (items, item) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i] == item) {\r\n                    items.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Removes element from array by key\r\n        collections.removeBy = function (items, key, value) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Replaced element by key\r\n        collections.replaceBy = function (items, key, value, data) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items[i] = data;\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n    \r\n        // Calculate difference between two collections\r\n        collections.difference = function (a1, a2, comparator) {\r\n            var result = [];\r\n    \r\n            _.each(a1, function (e1) {\r\n                var e2 = _.find(a2, function (e) {\r\n                    return comparator(e1, e);\r\n                });\r\n    \r\n                if (e2 == null) {\r\n                    result.push(e1);\r\n                }\r\n            })\r\n    \r\n            return result;\r\n        };\r\n\r\n        return collections;\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file General purpose utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, $, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.General', ['pipState', 'pipAssert']);\r\n\r\n    thisModule.factory('pipUtils', ['$rootScope', '$window', '$state', 'pipAssert', function ($rootScope, $window, $state, pipAssert) {\r\n\r\n        function strRepeat(str, qty) {\r\n            if (qty < 1) return '';\r\n            var result = '';\r\n            while (qty > 0) {\r\n                if (qty & 1) result += str;\r\n                qty >>= 1, str += str;\r\n            }\r\n            return result;\r\n        }\r\n\r\n        var toString = Object.prototype.toString;\r\n\r\n        var sprintf = (function sprintf() {\r\n            function get_type(variable) {\r\n                return toString.call(variable).slice(8, -1).toLowerCase();\r\n            }\r\n\r\n            var str_repeat = strRepeat;\r\n\r\n            var str_format = function() {\r\n                if (!str_format.cache.hasOwnProperty(arguments[0])) {\r\n                    str_format.cache[arguments[0]] = str_format.parse(arguments[0]);\r\n                }\r\n                return str_format.format.call(null, str_format.cache[arguments[0]], arguments);\r\n            };\r\n\r\n            str_format.format = function(parse_tree, argv) {\r\n                var cursor = 1, tree_length = parse_tree.length, node_type = '', arg, output = [], i, k, match, pad, pad_character, pad_length;\r\n                for (i = 0; i < tree_length; i++) {\r\n                    node_type = get_type(parse_tree[i]);\r\n                    if (node_type === 'string') {\r\n                        output.push(parse_tree[i]);\r\n                    }\r\n                    else if (node_type === 'array') {\r\n                        match = parse_tree[i]; // convenience purposes only\r\n                        if (match[2]) { // keyword argument\r\n                            arg = argv[cursor];\r\n                            for (k = 0; k < match[2].length; k++) {\r\n                                if (!arg.hasOwnProperty(match[2][k])) {\r\n                                    throw new Error(sprintf('[_.sprintf] property \"%s\" does not exist', match[2][k]));\r\n                                }\r\n                                arg = arg[match[2][k]];\r\n                            }\r\n                        } else if (match[1]) { // positional argument (explicit)\r\n                            arg = argv[match[1]];\r\n                        }\r\n                        else { // positional argument (implicit)\r\n                            arg = argv[cursor++];\r\n                        }\r\n\r\n                        if (/[^s]/.test(match[8]) && (get_type(arg) != 'number')) {\r\n                            throw new Error(sprintf('[_.sprintf] expecting number but found %s', get_type(arg)));\r\n                        }\r\n                        switch (match[8]) {\r\n                            case 'b': arg = arg.toString(2); break;\r\n                            case 'c': arg = String.fromCharCode(arg); break;\r\n                            case 'd': arg = parseInt(arg, 10); break;\r\n                            case 'e': arg = match[7] ? arg.toExponential(match[7]) : arg.toExponential(); break;\r\n                            case 'f': arg = match[7] ? parseFloat(arg).toFixed(match[7]) : parseFloat(arg); break;\r\n                            case 'o': arg = arg.toString(8); break;\r\n                            case 's': arg = ((arg = String(arg)) && match[7] ? arg.substring(0, match[7]) : arg); break;\r\n                            case 'u': arg = Math.abs(arg); break;\r\n                            case 'x': arg = arg.toString(16); break;\r\n                            case 'X': arg = arg.toString(16).toUpperCase(); break;\r\n                        }\r\n                        arg = (/[def]/.test(match[8]) && match[3] && arg >= 0 ? '+'+ arg : arg);\r\n                        pad_character = match[4] ? match[4] == '0' ? '0' : match[4].charAt(1) : ' ';\r\n                        pad_length = match[6] - String(arg).length;\r\n                        pad = match[6] ? str_repeat(pad_character, pad_length) : '';\r\n                        output.push(match[5] ? arg + pad : pad + arg);\r\n                    }\r\n                }\r\n                return output.join('');\r\n            };\r\n\r\n            str_format.cache = {};\r\n\r\n            str_format.parse = function(fmt) {\r\n                var _fmt = fmt, match = [], parse_tree = [], arg_names = 0;\r\n                while (_fmt) {\r\n                    if ((match = /^[^\\x25]+/.exec(_fmt)) !== null) {\r\n                        parse_tree.push(match[0]);\r\n                    }\r\n                    else if ((match = /^\\x25{2}/.exec(_fmt)) !== null) {\r\n                        parse_tree.push('%');\r\n                    }\r\n                    else if ((match = /^\\x25(?:([1-9]\\d*)\\$|\\(([^\\)]+)\\))?(\\+)?(0|'[^$])?(-)?(\\d+)?(?:\\.(\\d+))?([b-fosuxX])/.exec(_fmt)) !== null) {\r\n                        if (match[2]) {\r\n                            arg_names |= 1;\r\n                            var field_list = [], replacement_field = match[2], field_match = [];\r\n                            if ((field_match = /^([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                field_list.push(field_match[1]);\r\n                                while ((replacement_field = replacement_field.substring(field_match[0].length)) !== '') {\r\n                                    if ((field_match = /^\\.([a-z_][a-z_\\d]*)/i.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else if ((field_match = /^\\[(\\d+)\\]/.exec(replacement_field)) !== null) {\r\n                                        field_list.push(field_match[1]);\r\n                                    }\r\n                                    else {\r\n                                        throw new Error('[_.sprintf] huh?');\r\n                                    }\r\n                                }\r\n                            }\r\n                            else {\r\n                                throw new Error('[_.sprintf] huh?');\r\n                            }\r\n                            match[2] = field_list;\r\n                        }\r\n                        else {\r\n                            arg_names |= 2;\r\n                        }\r\n                        if (arg_names === 3) {\r\n                            throw new Error('[_.sprintf] mixing positional and named placeholders is not (yet) supported');\r\n                        }\r\n                        parse_tree.push(match);\r\n                    }\r\n                    else {\r\n                        throw new Error('[_.sprintf] huh?');\r\n                    }\r\n                    _fmt = _fmt.substring(match[0].length);\r\n                }\r\n                return parse_tree;\r\n            };\r\n\r\n            return str_format;\r\n        })();\r\n\r\n        return {\r\n            copyProperty: copyProperty,\r\n            copy: copyProperty,\r\n            swapProperties: swapProperties,\r\n            swap: swapProperties,\r\n            convertToBoolean: convertToBoolean,\r\n            toBoolean: convertToBoolean,\r\n            toBool: convertToBoolean,\r\n            convertObjectIdsToString: convertObjectIdsToString,\r\n            OidToString: convertObjectIdsToString,\r\n            generateVerificationCode: generateVerificationCode,\r\n            vercode: generateVerificationCode,\r\n            goBack: goBack,\r\n            goBackAndSelect: goBackAndSelect,\r\n            scrollTo: scrollTo,\r\n            equalObjectIds: equalObjectIds,\r\n            eqOid: equalObjectIds,\r\n            notEqualObjectIds: notEqualObjectIds,\r\n            neqOid: notEqualObjectIds,\r\n            containsObjectId: containsObjectId,\r\n            hasOid: containsObjectId,\r\n            isObjectId: isObjectId,\r\n            // Strings functions. No analogues in lodash.strings\r\n            sampleLine: sampleLine,\r\n            hashCode: hashCode,\r\n            makeString: makeString,\r\n            getBrowser: getBrowser,\r\n            checkSupported: checkSupported,\r\n            sprintf: sprintf,\r\n            // Collection function. No analogues in lodash. It may be in lodash later. Look gitHub/lodash issue #1022\r\n            replaceBy: replaceBy\r\n        };\r\n        \r\n        //--------------------\r\n        function replaceBy(items, key, value, data) {\r\n            if (!items || !items.length)\r\n                return null;\r\n            for (var i = 0; i < items.length; i++) {\r\n                if (items[i][key] == value) {\r\n                    items[i] = data;\r\n                    return;\r\n                }\r\n            }\r\n        };\r\n\r\n        // Creates a sample line from a text\r\n        function sampleLine(value, maxLength) {\r\n            if (!value || value == '') return '';\r\n\r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n\r\n            return value.substring(0, length);\r\n        };\r\n\r\n        // Simple version of string hashcode\r\n        function hashCode(value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        };\r\n\r\n        // Ensure some object is a coerced to a string\r\n        function makeString(object) {\r\n            if (object == null) return '';\r\n            return '' + object;\r\n        };\r\n\r\n        function isObjectId(value) {\r\n            var checkForHexRegExp = new RegExp(\"^[0-9a-fA-F]{24}$\");\r\n            return checkForHexRegExp.test(value);\r\n        }\r\n\r\n        // Compares two ObjectIds (they are not equal by '==')\r\n        function equalObjectIds(value1, value2) {\r\n            if (value1 == null && value2 == null)\r\n                return true;\r\n\r\n            if (value1 == null || value2 == null)\r\n                return false;\r\n\r\n            return value1.toString() == value2.toString();\r\n        };\r\n\r\n        // Compares two ObjectIds (they are always not equal by '!=')\r\n        function notEqualObjectIds(value1, value2) {\r\n            if (value1 == null && value2 == null)\r\n                return false;\r\n\r\n            if (value1 == null || value2 == null)\r\n                return true;\r\n\r\n            return value1.toString() != value2.toString();\r\n        };\r\n\r\n        // Checks if array contains concrete objectId\r\n        function containsObjectId(values, value) {\r\n            return _.some(values, function (value1) {\r\n                return equalObjectIds(value1, value);\r\n            });\r\n        };\r\n\r\n        // Copy property from one object to another if it exists (not null)\r\n        function copyProperty(dest, destProperty, orig, origProperty) {\r\n            // Shift if only 3 arguments set\r\n            if (_.isObject(destProperty)\r\n                && typeof (origProperty) == 'undefined') {\r\n                origProperty = orig;\r\n                orig = destProperty;\r\n                destProperty = origProperty;\r\n            }\r\n    \r\n            if (orig[origProperty] || (typeof (orig[origProperty]) === 'number' && orig[origProperty] % 1 == 0)) {\r\n                dest[destProperty] = orig[origProperty];\r\n                return true;\r\n            }\r\n    \r\n            return false;\r\n        };\r\n    \r\n        // Swaps values of two properties\r\n        function swapProperties(obj, prop1, prop2) {\r\n            var \r\n                temp1 = obj[prop1],\r\n                temp2 = obj[prop2];\r\n    \r\n            if (temp1) {\r\n                obj[prop2] = temp1;\r\n            }\r\n            else {\r\n                delete obj[prop2];\r\n            }\r\n    \r\n            if (temp2) {\r\n                obj[prop1] = temp2;\r\n            }\r\n            else {\r\n                delete obj[prop1];\r\n            }\r\n        };\r\n    \r\n        // Converts value into boolean\r\n        function convertToBoolean(value) {\r\n            if (value == null) return false;\r\n            if (!value) return false;\r\n            value = value.toString().toLowerCase();\r\n            return value == '1' || value == 'true';\r\n        };\r\n    \r\n        // Converts array of object ids to strings (for comparison)\r\n        function convertObjectIdsToString(values) {\r\n            return _.map(values, function (value) {\r\n                return value ? value.toString() : 0;\r\n            });\r\n        };\r\n\r\n        // Generates random big number for verification codes\r\n        function generateVerificationCode() {\r\n            return Math.random().toString(36).substr(2, 10).toUpperCase(); // remove `0.`\r\n        };\r\n\r\n        // Navigation\r\n        //-------------\r\n\r\n        function goBack() {\r\n            $window.history.back()\r\n        };\r\n\r\n        function goBackAndSelect(object, idParamName, objParamName) {\r\n            pipAssert.isDef(object, 'pipUtils.goBack: first argument should be defined');\r\n            pipAssert.isDef(idParamName, 'pipUtils.goBack: second argument should be defined');\r\n            pipAssert.isDef(objParamName, 'pipUtils.goBack: third argument should be defined');\r\n            pipAssert.isObject(object, 'pipUtils.goBack: first argument should be an object');\r\n            pipAssert.isString(idParamName, 'pipUtils.goBack: second argument should a string');\r\n            pipAssert.isString(objParamName, 'pipUtils.goBack: third argument should a string');\r\n                \r\n            if ($rootScope.$prevState && $rootScope.$prevState.name) {\r\n                var state = _.cloneDeep($rootScope.$prevState);\r\n\r\n                state.params[idParamName] = object.id;\r\n                state.params[objParamName] = object;\r\n\r\n                $state.go(state.name, state.params);\r\n            } else {\r\n                $window.history.back();\r\n            }\r\n        };\r\n\r\n        // Scrolling\r\n        //--------------\r\n        \r\n        function scrollTo(parentElement, childElement, animationDuration) {\r\n            if(!parentElement || !childElement) return;\r\n            if (animationDuration == undefined) animationDuration = 300;\r\n\r\n            setTimeout(function () {\r\n                if (!$(childElement).position()) return;\r\n                var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                if (modDiff < 20) return;\r\n                var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                if (animationDuration > 0)\r\n                    $(parentElement).animate({\r\n                        scrollTop: scrollTo + 'px'\r\n                    }, animationDuration);\r\n            }, 100);\r\n        };\r\n\r\n        // todo add support for iPhone\r\n        function getBrowser() {\r\n            var ua = $window.navigator.userAgent;\r\n\r\n            var bName = function () {\r\n                if (ua.search(/Edge/) > -1) return \"edge\";\r\n                if (ua.search(/MSIE/) > -1) return \"ie\";\r\n                if (ua.search(/Trident/) > -1) return \"ie11\";\r\n                if (ua.search(/Firefox/) > -1) return \"firefox\";\r\n                if (ua.search(/Opera/) > -1) return \"opera\";\r\n                if (ua.search(/OPR/) > -1) return \"operaWebkit\";\r\n                if (ua.search(/YaBrowser/) > -1) return \"yabrowser\";\r\n                if (ua.search(/Chrome/) > -1) return \"chrome\";\r\n                if (ua.search(/Safari/) > -1) return \"safari\";\r\n                if (ua.search(/Maxthon/) > -1) return \"maxthon\";\r\n            }();\r\n\r\n            var version;\r\n            switch (bName) {\r\n                case \"edge\":\r\n                    version = (ua.split(\"Edge\")[1]).split(\"/\")[1];\r\n                    break;\r\n                case \"ie\":\r\n                    version = (ua.split(\"MSIE \")[1]).split(\";\")[0];\r\n                    break;\r\n                case \"ie11\":\r\n                    bName = \"ie\";\r\n                    version = (ua.split(\"; rv:\")[1]).split(\")\")[0];\r\n                    break;\r\n                case \"firefox\":\r\n                    version = ua.split(\"Firefox/\")[1];\r\n                    break;\r\n                case \"opera\":\r\n                    version = ua.split(\"Version/\")[1];\r\n                    break;\r\n                case \"operaWebkit\":\r\n                    bName = \"opera\";\r\n                    version = ua.split(\"OPR/\")[1];\r\n                    break;\r\n                case \"yabrowser\":\r\n                    version = (ua.split(\"YaBrowser/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"chrome\":\r\n                    version = (ua.split(\"Chrome/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"safari\":\r\n                    version = (ua.split(\"Version/\")[1]).split(\" \")[0];\r\n                    break;\r\n                case \"maxthon\":\r\n                    version = ua.split(\"Maxthon/\")[1];\r\n                    break;\r\n            }\r\n\r\n            var platform = 'desktop';\r\n            if (/iphone|ipad|ipod|android|blackberry|mini|windows\\sce|palm/i.test(ua.toLowerCase())) platform = 'mobile';\r\n\r\n            var os;\r\n            try {\r\n                var osAll = (/(windows|mac|android|linux|blackberry|sunos|solaris|iphone)/.exec(ua.toLowerCase()) || [u])[0].replace('sunos', 'solaris'),\r\n                    osAndroid = (/(android)/.exec(ua.toLowerCase()) || '');\r\n                    os = osAndroid && (osAndroid == 'android' || (osAndroid[0] == 'android')) ? 'android' : osAll;\r\n            } catch (err) {\r\n                os = 'unknown'\r\n            }\r\n\r\n            var browsrObj;\r\n\r\n            try {\r\n                browsrObj = {\r\n                    platform: platform,\r\n                    browser: bName,\r\n                    versionFull: version,\r\n                    versionShort: version.split(\".\")[0],\r\n                    os: os\r\n                };\r\n            } catch (err) {\r\n                browsrObj = {\r\n                    platform: platform,\r\n                    browser: 'unknown',\r\n                    versionFull: 'unknown',\r\n                    versionShort: 'unknown',\r\n                    os: 'unknown'\r\n                };\r\n            }\r\n\r\n            return browsrObj;\r\n        }\r\n\r\n        // todo нужны каке нибудь настройки?\r\n        function checkSupported(supported) {\r\n            if (!supported) supported = {\r\n                edge: 11,\r\n                ie: 11,\r\n                firefox: 43, //4, for testing\r\n                opera: 35,\r\n                chrome: 47\r\n            };\r\n\r\n            var systemInfo = getBrowser();\r\n\r\n            if (systemInfo && systemInfo.browser && supported[systemInfo.browser]){\r\n                if (systemInfo.versionShort >= supported[systemInfo.browser]) return true;\r\n            }\r\n            return true;\r\n\r\n        };\r\n\r\n    }]);\r\n\r\n})();\r\n","/**\r\n * @file String utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Move functions to general utilities\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Strings', []);\r\n\r\n    thisModule.factory('pipStrings', function () {\r\n        var strings = {};\r\n\r\n        // Creates a sample line from a text\r\n        strings.sampleLine = function (value, maxLength) {\r\n            if (!value || value == '') return '';\r\n    \r\n            var length = value.indexOf('\\n');\r\n            length = length >= 0 ? length : value.length;\r\n            length = length < maxLength ? value.length : maxLength;\r\n    \r\n            return value.substring(0, length);\r\n        };\r\n    \r\n        // Simple version of string hashcode\r\n        strings.hashCode = function (value) {\r\n            if (value == null) return 0;\r\n            var result = 0;\r\n            for (var i = 0; i < value.length; i++) {\r\n                result += value.charCodeAt(i);\r\n            }\r\n            return result;\r\n        };\r\n    \r\n        return strings;\r\n    });\r\n\r\n})();","/**\r\n * @file Search tag utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global _, angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module('pipUtils.Tags', []);\r\n\r\n    thisModule.factory('pipTags', function () {\r\n        var tags = {};\r\n        \r\n        var HASHTAG_REGEX = /#\\w+/g;\r\n    \r\n        var normalizeTag = function (tag) {\r\n            return tag \r\n                ? _.trim(tag.replace(/(_|#)+/g, ' '))\r\n                : null;\r\n        };\r\n        tags.normalizeTag = normalizeTag;\r\n    \r\n        var compressTag = function (tag) {\r\n            return tag\r\n                ? tag.replace(/( |_|#)/g, '').toLowerCase()\r\n                : null;\r\n        };\r\n        tags.compressTag = compressTag;\r\n    \r\n        var equalTags = function (tag1, tag2) {\r\n            if (tag1 == null && tag2 == null)\r\n                return true;\r\n            if (tag1 == null || tag2 == null)\r\n                return false;\r\n            return compressTag(tag1) == compressTag(tag2);\r\n        };\r\n        tags.equalTags = equalTags;\r\n    \r\n        var normalizeTags = function (tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return normalizeTag(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n        tags.normalizeTags = normalizeTags;\r\n    \r\n        var compressTags = function (tags) {\r\n            if (_.isString(tags)) {\r\n                tags = tags.split(/( |,|;)+/);\r\n            }\r\n    \r\n            tags = _.map(tags, function (tag) {\r\n                return compressTag(tag);\r\n            });\r\n    \r\n            return tags;\r\n        };\r\n        tags.compressTags = compressTags;\r\n    \r\n        var extractTags = function (entity, searchFields) {\r\n            var tags = normalizeTags(entity.tags);\r\n    \r\n            _.each(searchFields, function (field) {\r\n                var text = entity[field] || '';\r\n    \r\n                if (text != '') {\r\n                    var hashTags = text.match(HASHTAG_REGEX);\r\n                    tags = tags.concat(normalizeTags(hashTags));\r\n                }\r\n            });\r\n    \r\n            return _.uniq(tags);\r\n        };\r\n        tags.extractTags = extractTags;\r\n\r\n        return tags;\r\n    });\r\n\r\n})();\r\n","/**\r\n * @file Collection of utilities\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipUtils', \r\n\t\t['pipUtils.General', 'pipUtils.Strings', 'pipUtils.Tags', 'pipUtils.Collections']);\r\n})();\r\n"]}